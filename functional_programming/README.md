# 函数式编程是什么？

​		维基百科定义：“函数式编程(*Functional Programming*)是一种编程范式。它把计算当成是数学函数的求值（纯函数），从而避免改变状态和使用可变数据（无副作用）。它是一种声明式的编程范式，通过表达式和声明而不是语句来编程。”

​		函数式编程不是一种工具，而是一种可以同时适用于任何环境的思维方式。

​		函数式编程的目标是使用函数来**抽象作用在数据之上的控制流与操作**，从而在系统中**消除副作用**并**减少对状态的改变**。

#### 数学中函数的定义：输入值集合中的每项元素皆能对应**唯一**一项输出值集合中的元素

- 函数总是接受**一个**参数
- 函数总是返回**一个**值
- 对于给定的一个 X，只会输出**唯一**的一个 Y。

#### 命令式编程（*Imperative Programming*）与声明式编程（*Declarative Programming*）

- 命令式编程是面向过程的，开发者要告诉计算机**怎么做（*How do*）**，大量使用语句与运算符，比如循环语名，条件分支语句，逻辑运算符，三元运算符
- 声明式编程面向结果，开发者告诉计算机要**做什么（*What do*）**。大量使用函数，表达式。常见语言有：CSS（*Cascading Style She*）， 正则表达式（*egular expression*），SQL（*Structured Query Language*），HTML（*HyperText Markup Language*），XML（*eXtensible Markup Language*）

> 即使在声明式程序中，也需要做一些命令式程序中的工作。控制流，算术、比较和逻辑操作仍然是必须使用的基本构建块。但我们需要找到一种声明式的方式来描述这些基本构建块。

# 函数式编程的主要特点

#### 纯函数（*Pure Function*）

- 与数学中的函数定义保持一致，相同的输入，总是返回相同的输出。
- 运行过程中不产生副作用，也就是不会对运行环境产生影响，不会造成超出其作用域的影响。

#### 引用透明性或者无状态（*Referential Transparency*）

​	如果一个表达式是纯的，那么它在代码中的所有出现，都可以用它的值来代替。对于一个函数调用来说，这就意味着，对于同一个函数的输入参数相同的调用，都可以用其值来代替。这就是函数的引用透明性。

​	因为使用**无副作用的纯函数**，在处理并发与缓存有着天然优势。函数式编程的代码通常更加简洁，但是不一定易懂。函数式编程的解决方案中透露出优雅的美。

#### 数据不可变

​	使用纯函数，无副作用，意味着不会修改函数作用域以外的值。



# 函数式编程的好处

- 易测试，因为使用纯函数，测试结果总是保持一致，并且在需要的地方使用固定值代替。
- 可缓存，相同的输入总是返回相同的输出，所以可以缓存函数的输出。
- 利于组合，比如说链式调用是其中的一种应用。
- 促使将复杂的任务分解为简单的函数。

# 柯里化

#### 什么是柯里化？

​		将一个多元函数转换为一个嵌套的一元函数。

​		是一种在所有参数被提供之前，挂起或“延迟”函数执行，将多参函数转换为一元函数序列的技术。

```haskell
-- 函数定义
curry(f) :: (x, y, z) -> f(x) -> f(y) -> f(z)
```



```js
// 柯里化前
(x, y, z) => x + y + z;
// 柯里化之后
x => y => z => x + y + z;
```

#### 为什么需要柯里化？

​		简化代码，有助于移除很多函数调用中的样板代码。简单来说，可以使函数进行组合以及使用管道，以事件调用为例。

```jsx
// 柯里化前
const handleClick = (index, e) => items[index] = e.target.value
<a onClick={e => handleClick(index, e)}>Click</a>

// 柯里化后
const handleClick = index => e => items[index] = e.target.value
<a onClick={handleClick(index)}>Click</a>
```



# 与面向对象编程的区别

> 面向对象编程（*Object Oriented Programming*）通过封装变化使得代码更易理解
> 函数式编程通过最小化变化使得代码更易理解。

|            | 函数式                           | 面向对象                 |
| :--------- | -------------------------------- | ------------------------ |
| 组合单元   | 函数                             | 对象（类）               |
| 编程风格   | 声明式                           | 命令式                   |
| 数据和行为 | 独立且松耦合的纯函数             | 与方法紧耦合的类         |
| 状态管理   | 将对象视为不可变的值             | 主张通过实例方法改变对象 |
| 程序流控制 | 函数与递归                       | 循环语言与条件语句       |
| 线程安全   | 可并发编程                       | 难以实现                 |
| 封装性     | 因为一切都是不可变的，所以没必要 | 需要保护数据的完全性     |

# JavaScript 适合函数式编程吗？为什么？

JavaScript 适合函数式编程，因为在 JavaScript 中，函数是一等公民（First Class）。

为什么函数是一等公民？

- 函数可以赋值给其它变量
- 函数可以作为参数
- 函数可以作为返回值。

> 开始以函数式思维思考最简单的方式是，使用集合迭代函数代替循环。